<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Family Household Manager</title>
  <!-- Preconnect hints for performance -->
  <link rel="preconnect" href="/api" crossorigin>
  <link rel="dns-prefetch" href="/api">
  <style>*{box-sizing:border-box;margin:0;padding:0}body{font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,Oxygen,Ubuntu,sans-serif;background:linear-gradient(135deg,#f5f7fa 0%,#e4e8f0 100%);min-height:100vh;padding:2rem;color:#374151}.container{max-width:800px;margin:0 auto}h1{text-align:center;color:#6366f1;font-size:2.5rem;margin-bottom:2rem;font-weight:600}.card{background:#fff;border-radius:16px;padding:1.5rem;box-shadow:0 4px 6px -1px rgba(0,0,0,.1),0 2px 4px -1px rgba(0,0,0,.06);margin-bottom:1.5rem}.status-card{display:flex;align-items:center;gap:1rem}.status-indicator{width:12px;height:12px;border-radius:50%;background:#d1d5db}.status-indicator.ok{background:#10b981;box-shadow:0 0 8px rgba(16,185,129,.5)}.status-indicator.error{background:#ef4444;box-shadow:0 0 8px rgba(239,68,68,.5)}.status-text{font-size:1rem;color:#6b7280}.status-text strong{color:#374151}.timestamp{font-size:.875rem;color:#9ca3af;margin-top:.5rem}.welcome-message{text-align:center;color:#6b7280;font-size:1.125rem;line-height:1.75}</style>
</head>
<body>
  <div class="container">
    <h1>Family Household Manager</h1>

    <div class="card">
      <p class="welcome-message">
        Welcome to your family's household management hub.<br>
        Keep track of chores, schedules, and family activities all in one place.
      </p>
    </div>

    <div class="card status-card">
      <div id="status-indicator" class="status-indicator"></div>
      <div>
        <p class="status-text">Server Status: <strong id="status-text">Checking...</strong></p>
        <p id="timestamp" class="timestamp"></p>
      </div>
    </div>
  </div>

  <script>
    async function checkHealth() {
      const indicator = document.getElementById('status-indicator');
      const statusText = document.getElementById('status-text');
      const timestamp = document.getElementById('timestamp');

      try {
        const response = await fetch('/api/health');
        const data = await response.json();

        if (data.status === 'ok') {
          indicator.classList.remove('error');
          indicator.classList.add('ok');
          statusText.textContent = 'Connected';
          timestamp.textContent = 'Last checked: ' + new Date(data.timestamp).toLocaleString();
        } else {
          throw new Error('Unexpected status');
        }
      } catch (error) {
        indicator.classList.remove('ok');
        indicator.classList.add('error');
        statusText.textContent = 'Disconnected';
        timestamp.textContent = 'Unable to reach server';
      }
    }

    // Check health on page load
    checkHealth();

    // Refresh health status every 30 seconds
    setInterval(checkHealth, 30000);
  </script>
</body>
</html>
